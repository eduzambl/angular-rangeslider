!function(){"use strict";angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(e,n,a){var i=window.PointerEvent?1:window.MSPointerEvent?2:"ontouchend"in document?3:4,l=".rangeSlider",s={disabled:!1,orientation:"horizontal",step:0,decimalPlaces:0,showValues:!0,preventEqualMinMax:!1,attachHandleValues:!1},t=(1===i?"pointerdown":2===i?"MSPointerDown":3===i?"touchstart":"mousedown")+l,d=(1===i?"pointermove":2===i?"MSPointerMove":3===i?"touchmove":"mousemove")+l,o=(1===i?"pointerup":2===i?"MSPointerUp":3===i?"touchend":"mouseup")+l,r=function(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(n){return["x","y"]}},u=function(e){return 0>e?0:e>100?100:e},m=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return 4>i?angular.element("html").addClass("ngrs-touch"):angular.element("html").addClass("ngrs-no-touch"),{restrict:"A",replace:!0,scope:{disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@",typeEdit:"@"},template:function(e,n){var a=['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>','<div class="ngrs-range-bg"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),i=['<div class="ngrs-range-slider liveEdits">','<input type="text" class="input-small ng-valid pull-left" ng-model="modelMin" ng-show="typeEdit">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>','<div class="ngrs-range-bg"></div>',"</div>",'<input type="text" class="input-small ng-valid pull-right" ng-model="modelMax" ng-show="typeEdit">','<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join("");return n.typeEdit?i:a},link:function(i,c,g){function v(e){"min"===e?(angular.element(H[0]).css("display","none"),angular.element(H[1]).css("display","block")):"max"===e?(angular.element(H[0]).css("display","block"),angular.element(H[1]).css("display","none")):(angular.element(H[0]).css("display","block"),angular.element(H[1]).css("display","block"))}function f(e){e?b.addClass("disabled"):b.removeClass("disabled")}function M(){i.min>i.max&&x("min must be less than or equal to max"),angular.isDefined(i.min)&&angular.isDefined(i.max)&&(m(i.min)||x("min must be a number"),m(i.max)||x("max must be a number"),P=i.max-i.min,C=[i.min,i.max],h())}function h(){if(i.modelMin>i.modelMax&&(w("modelMin must be less than or equal to modelMax"),i.modelMin=i.modelMax),(angular.isDefined(i.modelMin)||"min"===i.pinHandle)&&(angular.isDefined(i.modelMax)||"max"===i.pinHandle)){m(i.modelMin)||("min"!==i.pinHandle&&w("modelMin must be a number"),i.modelMin=i.min),m(i.modelMax)||("max"!==i.pinHandle&&w("modelMax must be a number"),i.modelMax=i.max);var e=u((i.modelMin-i.min)/P*100),a=u((i.modelMax-i.min)/P*100);if(i.attachHandleValues)var l=e,s=a;i.modelMin=Math.max(i.min,i.modelMin),i.modelMax=Math.min(i.max,i.modelMax),i.filter?(i.filteredModelMin=n(i.filter)(i.modelMin,i.filterOptions),i.filteredModelMax=n(i.filter)(i.modelMax,i.filterOptions)):(i.filteredModelMin=i.modelMin,i.filteredModelMax=i.modelMax),i.min===i.max&&i.modelMin==i.modelMax?(angular.element(H[0]).css(E,"0%"),angular.element(H[1]).css(E,"100%"),i.attachHandleValues&&(angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),angular.element(y[0]).css(E,"0%"),angular.element(y[1]).css(E,"100%")),angular.element($).css(E,"0%").css(D,"0%")):(angular.element(H[0]).css(E,e+"%"),angular.element(H[1]).css(E,a+"%"),i.attachHandleValues&&(angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),angular.element(y[0]).css(E,l+"%"),angular.element(y[1]).css(E,s+"%"),angular.element(y[1]).css(D,"auto")),angular.element($).css(E,e+"%").css(D,100-a+"%"),e>95&&angular.element(H[0]).css("z-index",3))}}function p(n){var a=H[n];a.bind(t+"X",function(s){var t=(0===n?"ngrs-handle-min":"ngrs-handle-max")+"-down",m=a.add(e).add("body"),c=(0===n?i.modelMin:i.modelMax)-i.min,g=c/P*100,v=r(s),f=v,M=!1;angular.isFunction(i.onHandleDown)&&i.onHandleDown(),angular.element("body").bind("selectstart"+l,function(){return!1}),i.disabled||(a.addClass("ngrs-down"),b.addClass("ngrs-focus "+t),angular.element("body").addClass("ngrs-touching"),e.bind(d,function(e){e.preventDefault();var l,s,t=r(e),d=i.step/P*100,o=((0===n?i.modelMax:i.modelMin)-i.min)/P*100;"x"!==t[0]&&(t[0]-=v[0],t[1]-=v[1],l=[f[0]!==t[0],f[1]!==t[1]],s=g+100*t[V]/(V?b.height():b.width()),s=u(s),i.preventEqualMinMax&&(0===d&&(d=1/P*100),0===n?o-=d:1===n&&(o+=d)),0===n?s=s>o?o:s:1===n&&(s=o>s?o:s),i.step>0&&100>s&&s>0&&(s=Math.round(s/d)*d),s>95&&0===n?a.css("z-index",3):a.css("z-index",""),l[V]&&s!=M&&(0===n?i.modelMin=parseFloat(s*P/100+i.min).toFixed(i.decimalPlaces):1===n&&(i.modelMax=parseFloat(s*P/100+i.min).toFixed(i.decimalPlaces)),i.$apply(),M=s),f=t)}).bind(o,function(){angular.isFunction(i.onHandleUp)&&i.onHandleUp(),m.off(l),angular.element("body").removeClass("ngrs-touching"),a.removeClass("ngrs-down"),b.removeClass("ngrs-focus "+t)}))})}function x(e){throw i.disabled=!0,new Error("RangeSlider: "+e)}function w(e){a.warn(e)}var b=angular.element(c),H=[c.find(".ngrs-handle-min"),c.find(".ngrs-handle-max")],y=[c.find(".ngrs-value-min"),c.find(".ngrs-value-max")],$=c.find(".ngrs-join"),E="left",D="right",V=0,C=[0,0],P=0;i.filteredModelMin=i.modelMin,i.filteredModelMax=i.modelMax,g.$observe("disabled",function(e){angular.isDefined(e)||(i.disabled=s.disabled),i.$watch("disabled",f)}),g.$observe("orientation",function(e){angular.isDefined(e)||(i.orientation=s.orientation);for(var n,a=i.orientation.split(" "),l=0,t=a.length;t>l;l++)a[l]="ngrs-"+a[l];n=a.join(" "),b.addClass(n),("vertical"===i.orientation||"vertical left"===i.orientation||"vertical right"===i.orientation)&&(E="top",D="bottom",V=1)}),g.$observe("step",function(e){angular.isDefined(e)||(i.step=s.step)}),g.$observe("decimalPlaces",function(e){angular.isDefined(e)||(i.decimalPlaces=s.decimalPlaces)}),g.$observe("showValues",function(e){i.showValues=angular.isDefined(e)?"false"===e?!1:!0:s.showValues}),g.$observe("pinHandle",function(e){i.pinHandle=angular.isDefined(e)?"min"===e||"max"===e?e:null:null,i.$watch("pinHandle",v)}),g.$observe("preventEqualMinMax",function(e){i.preventEqualMinMax=angular.isDefined(e)?"false"===e?!1:!0:s.preventEqualMinMax}),g.$observe("attachHandleValues",function(e){i.attachHandleValues=angular.isDefined(e)?"false"===e?!1:!0:s.attachHandleValues}),i.$watch("min",M),i.$watch("max",M),i.$watch("modelMin",h),i.$watch("modelMax",h),i.$on("$destroy",function(){b.off(l),angular.element("body").off(l),e.off(l);for(var n=0,a=H.length;a>n;n++)H[n].off(l),H[n].off(l+"X")}),b.bind("selectstart"+l,function(){return!1}).bind("click",function(e){e.stopPropagation()}),p(0),p(1)}}}]),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()}();